CREATE TABLE Member (
	memberID INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
	name VARCHAR(40) NOT NULL,
	address VARCHAR(100) NOT NULL,
	phoneNumber VARCHAR(15) NOT NULL,
	mobileNumber VARCHAR(15),
	email VARCHAR(50)
);

CREATE TABLE Category(
	categoryID INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
	name VARCHAR(40) NOT NULL
);

CREATE Table Supplier(
	supplierID INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
	name VARCHAR(40) NOT NULL,
	address VARCHAR(100) NOT NULL,
	phoneNumber VARCHAR(15) NOT NULL,
	email VARCHAR(5)
);

CREATE TABLE Product(
	productID INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
	supplierID INT NOT NULL,
	categoryID INT NOT NULL,
	name VARCHAR(40) NOT NULL,
	rentalFee  Decimal(10, 2) NOT NULL,
	cost Decimal(10,2) NOT NULL,
	CONSTRAINT PRODUCT_SUPPLIER_FK FOREIGN KEY (supplierID) REFERENCES Supplier(supplierID),
	CONSTRAINT PRODUCT_CATEGORY_FK FOREIGN KEY (categoryID) REFERENCES Category(categoryID)
);


CREATE TABLE Branch(
	branchID INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
	address VARCHAR(100) NOT NULL,
	phoneNumber VARCHAR(15) NOT NULL,
	email VARCHAR(50)
);

CREATE TABLE Staff(
	staffID INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
	branchID INT NOT NULL,
	name VARCHAR(40),
	role VARCHAR(20),
	address VARCHAR(100),
	phoneNumber VARCHAR(15),
	email VARCHAR(50),
	username VARCHAR(50),
	password VARCHAR(50),
	CONSTRAINT STAFF_BRANCH_FK FOREIGN KEY (branchID) REFERENCES Branch(branchID),
	CONSTRAINT CHK_STAFF_ROLE  CHECK (role IN ('Admin', 'Instructor', 'CounterStaff', 'Owner'))
);

CREATE TABLE Stock(
	stockID INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
	branchID INT NOT NULL,
	productID INT NOT NULL,
	amount INT NOT NULL
);

CREATE TABLE Rental(
	rentalID INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
	memberID INT NOT NULL,
	branchID INT NOT NULL,
	rentalDate Date NOT NULL,
	totalCost Decimal(10, 2),
	CONSTRAINT RENTAL_MEMBER_FK FOREIGN KEY (memberID) REFERENCES Member(memberID),
	CONSTRAINT RENTAL_BRANCH_FK FOREIGN KEY (branchID) REFERENCES Branch(branchID)
);

CREATE TABLE RentalItem(
	rentalItemID INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
	rentalID INT NOT NULL,
	productID INT NOT NULL,
	cost Decimal(10,2),
	CONSTRAINT RENTALITEM_RENTAL_FK FOREIGN KEY (rentalID) REFERENCES Rental(rentalID),
	CONSTRAINT RENTALITEM_PRODUCT_FK FOREIGN KEY (productID) REFERENCES Product(productID)
);